<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mom OS</title>

<style>
body{
margin:0;
color:white;
font-family:"Microsoft YaHei";
overflow:hidden;
text-align:center;
animation:bgMove 15s infinite alternate;
}

@keyframes bgMove{
0%{background:linear-gradient(to right,#000000,#1a1a2e);}
50%{background:linear-gradient(to right,#16213e,#0f3460);}
100%{background:linear-gradient(to right,#1a1a2e,#000000);}
}

#intro{
position:absolute;
width:100%;
height:100%;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
background:black;
z-index:5;
}

button{
padding:10px 20px;
font-size:16px;
border:none;
border-radius:20px;
cursor:pointer;
margin:10px;
background:white;
color:black;
}

#main{
display:none;
position:relative;
z-index:2;
}

#message{
width:70%;
margin:auto;
margin-top:20px;
min-height:100px;
font-size:22px;
white-space:pre-line;
}

#randomWish{
font-size:22px;
margin-top:20px;
min-height:40px;
opacity:0;
transition:opacity 0.5s;
}

#carousel{
position:relative;
width:300px;
height:300px;
margin:40px auto;
transform-style:preserve-3d;
transition: transform 0.1s linear;
}

#carousel img{
position:absolute;
width:280px;
height:280px;
left:10px;
top:10px;
border-radius:20px;
object-fit:cover;
}


.star{
position:absolute;
width:2px;
height:2px;
background:white;
animation:twinkle 2s infinite alternate;
}

@keyframes twinkle{
from{opacity:0.3;}
to{opacity:1;}
}

.heart{
position:absolute;
color:#ff4e8a;
font-size:20px;
animation:fall 5s linear infinite;
}

@keyframes fall{
0%{transform:translateY(-50px);}
100%{transform:translateY(800px);}
}

canvas{
position:absolute;
top:0;
left:0;
z-index:0;
pointer-events:none;
}
</style>
</head>

<body>

<div id="intro">
<h1>Mom OS å¯åŠ¨ä¸­...</h1>
<input type="password" id="password" placeholder="è¾“å…¥è§£é”å¯†ç ">
<button onclick="unlock()">è§£é”</button>
</div>

<div id="main">
<h1>å¦ˆå¦ˆï¼Œ ç”Ÿæ—¥å¿«ä¹ï¼</h1>

<div id="message"></div>

<div id="carousel">
<img src="photo1.jpg" style="transform:rotateY(0deg) translateZ(400px);">
<img src="photo2.jpg" style="transform:rotateY(120deg) translateZ(400px);">
<img src="photo3.jpg" style="transform:rotateY(240deg) translateZ(400px);">
</div>

<button onclick="showRandomWish()">ç‚¹æˆ‘ä¸€ä¸‹</button>
<div id="randomWish"></div>

<button onclick="toggleMusic()">æ’­æ”¾/æš‚åœéŸ³ä¹</button>

<audio id="music" loop>
<source src="birthday.mp3" type="audio/mpeg">
</audio>

</div>

<canvas id="fireworks"></canvas>

<script>

/* è§£é” */
function unlock(){
var pass=document.getElementById("password").value;
if(pass==="mom"){
document.getElementById("intro").style.display="none";
document.getElementById("main").style.display="block";
startAll();
}else{
alert("å¯†ç é”™è¯¯");
}
}

/* å¯åŠ¨ */
function startAll(){
typeWriter();
createStars();
setInterval(createHeart,300);
startFireworks();
}

/* =========================
   ğŸ† å…¨å±€çƒŸèŠ±ç³»ç»Ÿï¼ˆç¨³å®šç‰ˆï¼‰
========================= */

var canvas = document.getElementById("fireworks");
var ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

var particles = [];

window.addEventListener("resize", function(){
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
});

function explode(x,y, power=50){

for(var i=0;i<power;i++){
var angle = Math.random()*2*Math.PI;
var speed = Math.random()*5+2;

particles.push({
x:x,
y:y,
dx:Math.cos(angle)*speed,
dy:Math.sin(angle)*speed,
life:80
});
}
}

canvas.addEventListener("click", function(e){
explode(e.clientX, e.clientY, 60);
});

function animateFireworks(){
ctx.clearRect(0,0,canvas.width,canvas.height);

particles.forEach((p,i)=>{
p.x+=p.dx;
p.y+=p.dy;
p.life--;

ctx.fillStyle="hsl("+Math.random()*360+",100%,60%)";
ctx.fillRect(p.x,p.y,3,3);

if(p.life<=0){
particles.splice(i,1);
}
});

requestAnimationFrame(animateFireworks);
}

animateFireworks();

/* æ‰“å­—å¼€åœº */
var text="ç³»ç»Ÿæ£€æµ‹å®Œæˆã€‚\n\
æ£€æµ‹åˆ°ï¼šæœ¬ç³»ç»Ÿæœ€é‡è¦çš„äººã€‚\n\
ä»Šå¤©å±äºä½ ã€‚";
var i=0;
function typeWriter(){
if(i<text.length){
document.getElementById("message").innerHTML+=text.charAt(i);
i++;
setTimeout(typeWriter,60);
}
}

/* éšæœºç¥ç¦è¯­ */
var wishes=[
"ğŸ‰ ç”Ÿæ—¥å¿«ä¹ï¼",
"ä»Šæ—¥çŠ¶æ€ï¼šç¨³å®šè¿è¡Œã€‚",
"ç¥æ¯å¤©éƒ½æœ‰å¥½å¿ƒæƒ…ï¼",
"ä»Šå¤©ä¸å¹ç‰›äº†ï¼Œå¹ä¸ªèœ¡çƒ›",
"ç™¾æ¯’ä¸ä¾µã€åˆ€æªä¸å…¥ã€é€é¥å¿«ä¹ï¼",
"æ­å–œä½ åˆç»•ç€å¤ªé˜³è½¬äº†ä¸€åœˆ",
"ç™¾äº‹å¯ä¹",
"ä¸‡äº‹èŠ¬è¾¾",
"å¤©å¤©å“‡å“ˆå“ˆ",
"å¯¿è€ƒç»´ç¥ºï¼Œä»¥ä»‹æ™¯ç¦",
"å¦‚æœˆä¹‹æ’ï¼Œå¦‚æ—¥ä¹‹å‡",
"æ„¿å›åƒä¸‡å²ï¼Œæ— å²ä¸é€¢æ˜¥",
"å¦‚æ¾æŸä¹‹èŒ‚ï¼Œæ— ä¸å°”æˆ–æ‰¿",
];

function showRandomWish(){
var random=wishes[Math.floor(Math.random()*wishes.length)];
var box=document.getElementById("randomWish");
box.style.opacity=0;
setTimeout(function(){
box.innerHTML=random;
box.style.opacity=1;
},200);
}

/* éŸ³ä¹æ§åˆ¶ */
function toggleMusic(){
var m=document.getElementById("music");
if(m.paused){ m.play(); }
else{ m.pause(); }
}

/* æ˜Ÿç©º */
function createStars(){
for(var i=0;i<100;i++){
var star=document.createElement("div");
star.className="star";
star.style.left=Math.random()*100+"%";
star.style.top=Math.random()*100+"%";
document.body.appendChild(star);
}
}


/* çˆ±å¿ƒ */
function createHeart(){
var heart=document.createElement("div");
heart.className="heart";
heart.innerHTML="â¤ï¸";
heart.style.left=Math.random()*100+"%";
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),5000);
}


/* =========================
   ğŸ® æ¥ä½çˆ±å¿ƒå°æ¸¸æˆ
========================= */

var gameRunning = false;
var score = 0;
var timeLeft = 30;
var basket;
var heartsGame = [];
var gameInterval;
var timerInterval;

/* åˆ›å»ºæ¸¸æˆæŒ‰é’® */
var gameBtn = document.createElement("button");
gameBtn.innerHTML = "å¼€å§‹å°æ¸¸æˆ";
gameBtn.onclick = startGame;
document.getElementById("main").appendChild(gameBtn);

/* å¼€å§‹æ¸¸æˆ */
function startGame(){

if(gameRunning) return;

// å¦‚æœå·²æœ‰æ—§æ¸¸æˆåŒºåŸŸï¼Œå…ˆåˆ é™¤
var oldGame = document.getElementById("gameArea");
if(oldGame){
oldGame.remove();
}

gameRunning = true;
score = 0;
timeLeft = 30;
heartsGame = [];
var specialTriggered = false; 

var gameArea = document.createElement("div");
gameArea.id = "gameArea";
gameArea.style.position = "absolute";
gameArea.style.bottom = "0";
gameArea.style.left = "0";
gameArea.style.width = "100%";
gameArea.style.height = "60%";
gameArea.style.overflow = "hidden";
document.body.appendChild(gameArea);

/* ç¯®å­ */
basket = document.createElement("div");
basket.style.position = "absolute";
basket.style.bottom = "10px";
basket.style.left = "45%";
basket.style.fontSize = "40px";
basket.innerHTML = "ğŸ§º";
gameArea.appendChild(basket);

/* æ˜¾ç¤ºåˆ†æ•° */
var scoreBoard = document.createElement("div");
scoreBoard.id = "scoreBoard";
scoreBoard.style.position = "absolute";
scoreBoard.style.top = "10px";
scoreBoard.style.left = "10px";
scoreBoard.innerHTML = "å¾—åˆ†: 0 | å‰©ä½™æ—¶é—´: 30";
gameArea.appendChild(scoreBoard);

/* æ‰‹æœºè§¦å±æ§åˆ¶ */
gameArea.addEventListener("touchmove", function(e){
if(!gameRunning) return;

var touch = e.touches[0];
var x = touch.clientX;

/* è®©ç¯®å­è·Ÿéšæ‰‹æŒ‡ */
basket.style.left = (x - 20) + "px";
});

/* å…¼å®¹é¼ æ ‡æ‹–åŠ¨ï¼ˆç”µè„‘ä¹Ÿèƒ½ç”¨ï¼‰ */
gameArea.addEventListener("mousemove", function(e){
if(!gameRunning) return;
basket.style.left = (e.clientX - 20) + "px";
});

function clampBasket(){
var left = basket.offsetLeft;
if(left < 0) basket.style.left = "0px";
if(left > window.innerWidth - 40)
basket.style.left = (window.innerWidth - 40) + "px";
}

setInterval(clampBasket, 10);

/* çˆ±å¿ƒç”Ÿæˆ */
gameInterval = setInterval(function(){
var heart = document.createElement("div");
heart.innerHTML = "â¤ï¸";
heart.style.position = "absolute";
heart.style.left = Math.random()*90 + "%";
heart.style.top = "0px";
heart.style.fontSize = "30px";
gameArea.appendChild(heart);
heartsGame.push(heart);
},800);

/* ä¸‹è½åŠ¨ç”» */
var fallInterval = setInterval(function(){
heartsGame.forEach(function(heart, index){
var top = heart.offsetTop;
heart.style.top = (top + 5) + "px";

/* ç¢°æ’æ£€æµ‹ */
if(top > window.innerHeight*0.5 - 60){
if(Math.abs(heart.offsetLeft - basket.offsetLeft) < 50){
score++;
heart.remove();
heartsGame.splice(index,1);

/* ğŸ† å½©è›‹è§¦å‘ */
if(score > 15 && !specialTriggered){
specialTriggered = true;
bigCelebration();
}
}
}

/* æ‰å‡ºå±å¹•åˆ é™¤ */
if(top > window.innerHeight*0.6){
heart.remove();
heartsGame.splice(index,1);
}
});
},30);

/* è®¡æ—¶å™¨ */
timerInterval = setInterval(function(){
timeLeft--;
scoreBoard.innerHTML = "å¾—åˆ†: " + score + " | å‰©ä½™æ—¶é—´: " + timeLeft;

if(timeLeft <= 0){

clearInterval(gameInterval);
clearInterval(timerInterval);
clearInterval(fallInterval);

gameRunning = false;

setTimeout(()=>{
var area = document.getElementById("gameArea");
if(area) area.remove();
},500);

alert("æ¸¸æˆç»“æŸ ğŸ‰\næœ€ç»ˆå¾—åˆ†: " + score);
}
},1000);

}
/* =========================
   ğŸ¡ æ‰‹åŠ¨æ‹–åŠ¨æ—‹è½¬ç›¸å†Œ
========================= */

var carousel = document.getElementById("carousel");
var currentRotation = 0;
var isDragging = false;
var startX = 0;

carousel.addEventListener("mousedown", function(e){
isDragging = true;
startX = e.clientX;
});

document.addEventListener("mousemove", function(e){
if(!isDragging) return;
var delta = e.clientX - startX;
currentRotation += delta * 0.3;
carousel.style.transform = "rotateY(" + currentRotation + "deg)";
startX = e.clientX;
});

document.addEventListener("mouseup", function(){
isDragging = false;
});

/* æ‰‹æœºè§¦æ§ */
carousel.addEventListener("touchstart", function(e){
isDragging = true;
startX = e.touches[0].clientX;
});

carousel.addEventListener("touchmove", function(e){
if(!isDragging) return;
var delta = e.touches[0].clientX - startX;
currentRotation += delta * 0.3;
carousel.style.transform = "rotateY(" + currentRotation + "deg)";
startX = e.touches[0].clientX;
});

carousel.addEventListener("touchend", function(){
isDragging = false;
});

/* =========================
   ğŸ† å¤§çƒŸèŠ± + ç”Ÿæ—¥æ–‡å­—
========================= */

function bigCelebration(){

// å±…ä¸­æ–‡å­—
var msg = document.createElement("div");
msg.innerHTML = "å¦ˆå¦ˆç”Ÿæ—¥å¿«ä¹";
msg.style.position = "fixed";
msg.style.top = "50%";
msg.style.left = "50%";
msg.style.transform = "translate(-50%,-50%)";
msg.style.fontSize = "60px";
msg.style.fontWeight = "bold";
msg.style.color = "white";
msg.style.textShadow = "0 0 20px pink, 0 0 40px hotpink";
msg.style.zIndex = "9999";
msg.style.opacity = "0";
msg.style.transition = "opacity 1s";
document.body.appendChild(msg);

// æ¸æ˜¾
setTimeout(()=>{ msg.style.opacity = "1"; },100);

// ä¸­å¤®çˆ†ç‚¸
var canvas = document.getElementById("fireworks");
var rect = canvas.getBoundingClientRect();
var centerX = rect.width / 2;
var centerY = rect.height / 2;

for(var i=0;i<5;i++){
setTimeout(function(){
explode(canvas.width/2, canvas.height/2, 150);
}, i*400);
}

// 5ç§’åæ·¡å‡º
setTimeout(function(){
msg.style.opacity = "0";
setTimeout(()=>msg.remove(),1000);
},5000);
}
</script>

</body>
</html>
